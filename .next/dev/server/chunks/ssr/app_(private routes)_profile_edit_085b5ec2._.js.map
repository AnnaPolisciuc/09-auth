{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/app/(private routes)/profile/edit/EditProfilePage.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"actions\": \"EditProfilePage-module__XoJWpq__actions\",\n  \"avatar\": \"EditProfilePage-module__XoJWpq__avatar\",\n  \"cancelButton\": \"EditProfilePage-module__XoJWpq__cancelButton\",\n  \"formTitle\": \"EditProfilePage-module__XoJWpq__formTitle\",\n  \"input\": \"EditProfilePage-module__XoJWpq__input\",\n  \"mainContent\": \"EditProfilePage-module__XoJWpq__mainContent\",\n  \"profileCard\": \"EditProfilePage-module__XoJWpq__profileCard\",\n  \"profileInfo\": \"EditProfilePage-module__XoJWpq__profileInfo\",\n  \"saveButton\": \"EditProfilePage-module__XoJWpq__saveButton\",\n  \"usernameWrapper\": \"EditProfilePage-module__XoJWpq__usernameWrapper\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///Users/annapolisciuc/Desktop/Projects/09-auth/app/%28private%20routes%29/profile/edit/page.tsx"],"sourcesContent":["'use client';\n\nimport { useAuthStore } from \"@/lib/store/authStore\";\nimport css from \"./EditProfilePage.module.css\";\nimport { useRouter } from \"next/navigation\";\nimport { useState, useEffect } from \"react\";\nimport { updateMe, uploadImage } from \"@/lib/api/clientApi\";\nimport Image from \"next/image\";\n\nexport default function EditProfile() {\n  const router = useRouter();\n  const user = useAuthStore((state) => state.user);\n  const setUser = useAuthStore((state) => state.setUser);\n\n  const [username, setUsername] = useState(user?.username || \"\");\n  const [photoUrl, setPhotoUrl] = useState<string | null>(user?.avatar || null);\n  const [imageFile, setImageFile] = useState<File | null>(null);\n  const [preview, setPreview] = useState<string | null>(user?.avatar || null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  if (!user) return <p>Loading...</p>;\n\n  const handleImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    if (!file.type.startsWith(\"image/\")) {\n      setError(\"Only images are allowed\");\n      return;\n    }\n\n    const MAX_SIZE = 2 * 1024 * 1024;\n    if (file.size > MAX_SIZE) {\n  setError(\"Max file size 2MB\");\n  return;\n}\n\n    setError(null);\n    setImageFile(file);\n    setPreview(URL.createObjectURL(file));\n  };\n\n  const handleRemoveImage = () => {\n    setImageFile(null);\n    setPreview(null);\n    setPhotoUrl(null);\n  };\n\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  useEffect(() => {\n    return () => {\n      if (preview) URL.revokeObjectURL(preview);\n    };\n  }, [preview]);\n\n  const handleSave = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n\n    try {\n      let newPhotoUrl: string | null = photoUrl;\n\n      if (imageFile) {\n        newPhotoUrl = await uploadImage(imageFile);\n      }\n\n      const updatedUser = await updateMe({\n        username,\n        avatar: newPhotoUrl ?? undefined,\n      });\n\n      setUser(updatedUser);\n      router.push(\"/profile\");\n    } catch (err) {\n      console.error(err);\n      setError(\"Failed to save user\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCancel = () => router.push(\"/profile\");\n\n  return (\n    <main className={css.mainContent}>\n      <div className={css.profileCard}>\n        <h1 className={css.formTitle}>Edit Profile</h1>\n\n        <div className={css.avatarWrapper}>\n          {preview ? (\n            <Image\n              src={preview}\n              alt=\"User Avatar\"\n              width={120}\n              height={120}\n              className={css.avatar}\n            />\n          ) : (\n            <div className={css.avatarPlaceholder}>No Avatar</div>\n          )}\n\n          <label className={css.uploadLabel}>\n            <span>{preview ? \"Change photo\" : \"Upload photo\"}</span>\n            <input\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={handleImageChange}\n              className={css.uploadInput}\n            />\n          </label>\n\n          {preview && (\n            <button type=\"button\" className={css.removeButton} onClick={handleRemoveImage}>\n              Remove\n            </button>\n          )}\n        </div>\n\n        <form className={css.profileInfo} onSubmit={handleSave}>\n          <div className={css.usernameWrapper}>\n            <label htmlFor=\"username\">Username:</label>\n            <input\n              id=\"username\"\n              type=\"text\"\n              className={css.input}\n              value={username}\n              onChange={(e) => setUsername(e.target.value)}\n              required\n            />\n          </div>\n\n          <p>Email: {user.email}</p>\n\n          {error && <p className={css.error}>{error}</p>}\n\n          <div className={css.actions}>\n            <button type=\"submit\" className={css.saveButton} disabled={loading}>\n              {loading ? \"Saving...\" : \"Save\"}\n            </button>\n\n            <button type=\"button\" className={css.cancelButton} onClick={handleCancel}>\n              Cancel\n            </button>\n          </div>\n        </form>\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}