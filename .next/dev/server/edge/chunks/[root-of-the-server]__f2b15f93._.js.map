{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["\n// import { NextResponse } from 'next/server';\n// import type { NextRequest } from 'next/server';\n\n// export async function middleware(req: NextRequest) {\n//   const { pathname } = req.nextUrl;\n\n//   const publicRoutes = [\n//     '/sign-in',\n//     '/sign-up',\n//     '/api/auth',\n//     '/',\n//   ];\n\n//   if (publicRoutes.some((route) => pathname.startsWith(route))) {\n//     return NextResponse.next();\n//   }\n\n//   const token =\n//     req.cookies.get('accessToken')?.value ||\n//     req.cookies.get('token')?.value ||\n//     req.cookies.get('auth')?.value;\n\n//   if (!token) {\n//     const url = req.nextUrl.clone();\n//     url.pathname = '/sign-in';\n//     return NextResponse.redirect(url);\n//   }\n\n//   const requestHeaders = new Headers(req.headers);\n//   requestHeaders.set('Cookie', req.cookies.toString());\n\n//   return NextResponse.next({\n//     request: {\n//       headers: requestHeaders,\n//     },\n//   });\n// }\n\n// export const config = {\n//   matcher: [\n//     '/notes/:path*',\n//     '/profile/:path*',\n//     '/api/:path*',\n//   ],\n// };\n\n\nimport { NextRequest, NextResponse } from 'next/server';\nimport { cookies } from 'next/headers';\n\nconst privateRoutes = ['/profile', '/notes'];\nconst publicRoutes = ['/sign-in', '/sign-up', '/'];\n\nexport async function middleware(request: NextRequest) {\n  const { pathname } = request.nextUrl;\n  const cookieStore = await cookies();\n  const accessToken = cookieStore.get('accessToken')?.value;\n  const refreshToken = cookieStore.get('refreshToken')?.value;\n\n  const isPublicRoute = publicRoutes.some((route) => pathname.startsWith(route));\n  const isPrivateRoute = privateRoutes.some((route) => pathname.startsWith(route));\n\n  if (accessToken) {\n    if (isPublicRoute) return NextResponse.redirect(new URL('/', request.url));\n    if (isPrivateRoute) return NextResponse.next();\n  }\n\n  if (!accessToken) {\n    if (refreshToken) {\n      if (isPrivateRoute) return NextResponse.redirect(new URL('/sign-in', request.url));\n      if (isPublicRoute) return NextResponse.next();\n    } else {\n      if (isPrivateRoute) return NextResponse.redirect(new URL('/sign-in', request.url));\n      if (isPublicRoute) return NextResponse.next();\n    }\n  }\n\n  return NextResponse.next();\n}\n\nexport const config = {\n  matcher: ['/profile/:path*', '/notes/:path*', '/sign-in', '/sign-up'],\n};\n\n"],"names":[],"mappings":"AACA,8CAA8C;AAC9C,kDAAkD;AAElD,uDAAuD;AACvD,sCAAsC;AAEtC,2BAA2B;AAC3B,kBAAkB;AAClB,kBAAkB;AAClB,mBAAmB;AACnB,WAAW;AACX,OAAO;AAEP,oEAAoE;AACpE,kCAAkC;AAClC,MAAM;AAEN,kBAAkB;AAClB,+CAA+C;AAC/C,yCAAyC;AACzC,sCAAsC;AAEtC,kBAAkB;AAClB,uCAAuC;AACvC,iCAAiC;AACjC,yCAAyC;AACzC,MAAM;AAEN,qDAAqD;AACrD,0DAA0D;AAE1D,+BAA+B;AAC/B,iBAAiB;AACjB,iCAAiC;AACjC,SAAS;AACT,QAAQ;AACR,IAAI;AAEJ,0BAA0B;AAC1B,eAAe;AACf,uBAAuB;AACvB,yBAAyB;AACzB,qBAAqB;AACrB,OAAO;AACP,KAAK;;;;;;;AAGL;AAAA;AACA;AAAA;;;AAEA,MAAM,gBAAgB;IAAC;IAAY;CAAS;AAC5C,MAAM,eAAe;IAAC;IAAY;IAAY;CAAI;AAE3C,eAAe,WAAW,OAAoB;IACnD,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IACpC,MAAM,cAAc,MAAM,IAAA,sLAAO;IACjC,MAAM,cAAc,YAAY,GAAG,CAAC,gBAAgB;IACpD,MAAM,eAAe,YAAY,GAAG,CAAC,iBAAiB;IAEtD,MAAM,gBAAgB,aAAa,IAAI,CAAC,CAAC,QAAU,SAAS,UAAU,CAAC;IACvE,MAAM,iBAAiB,cAAc,IAAI,CAAC,CAAC,QAAU,SAAS,UAAU,CAAC;IAEzE,IAAI,aAAa;QACf,IAAI,eAAe,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,KAAK,QAAQ,GAAG;QACxE,IAAI,gBAAgB,OAAO,gMAAY,CAAC,IAAI;IAC9C;IAEA,IAAI,CAAC,aAAa;QAChB,IAAI,cAAc;YAChB,IAAI,gBAAgB,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,YAAY,QAAQ,GAAG;YAChF,IAAI,eAAe,OAAO,gMAAY,CAAC,IAAI;QAC7C,OAAO;YACL,IAAI,gBAAgB,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,YAAY,QAAQ,GAAG;YAChF,IAAI,eAAe,OAAO,gMAAY,CAAC,IAAI;QAC7C;IACF;IAEA,OAAO,gMAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;QAAmB;QAAiB;QAAY;KAAW;AACvE"}}]
}